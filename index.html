<!DOCTYPE html>
<html>

<head>
    <title>Leaflet Time Slider Example</title>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css" type="text/css">
</head>

<body>
    <div id="map" style="width: 100%; height: 600px"></div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Include this library for mobile touch support  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>


    <script src="src/SliderControl.js"></script>

    <script>
//    var sliderControl = null;

    var points = [
        {
            type: 'Feature',
            properties: {
                time: '1995/11/11',
//                icon: myIcon,
                popup: '<b>November 11, 1995</b><br> Action at the East Side Marriott against the Christian Coalition which was having a School Board Training. Rode up to Hotel in Yellow school bus; dressed in pleated skirts and and with I was a Lesbian Child T-shirts; a group marched in and sang a song as they marched thru the halls and out again to join others for picket for an hour. Gave out leaflets and pencils (Erase the Christian Right).'
            }, 
            geometry: {        
                type: 'Point',
                coordinates: [7.582512743, 51.933292258]
            }
        },
        {
            type: 'Feature',
            properties: {
                time: '1992/10/06',
  //              icon: myIcon, 
                popup: '<b>October 6, 1992</b><br> Avengers gathered to counter-protest when the chair of community board 24 (Mary Cummins) had bussed in parents to do a protest about the Rainbow Curriculum. According to Maxine Wolfe, We marched down the street in front of the Board of Ed, with the brass band in front, folled by a replica of our bomb corried by four women, surrounded by flags. The bomb and flags said Lighten Up. Teach about Lesbians.' 
            }, 
            geometry: {       
                type: 'Point',
                coordinates: [7.602516645, 51.94962073]
            }
        },
        {
            type: 'Feature',
            properties: {
                time: '1992/10/29',
//                icon: myIcon, 
                popup: '<b>October 29, 1992</b><br>Held a press conference about the murders of Hattie Mae Cohens and Brian Mock, and no on 9.' 
            }, 
            geometry: {
                type: 'Point',
                coordinates: [7.61132039, 51.967614681]
            }
        }
    ]
	    
    var myMap = L.map('map').setView([51.95, 7.6], 12);

    L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(myMap);


    //Use usual LayerGroups instead of GeoJSON fetched markers
/*   
var marker1 = L.marker([51.5, -0.09], {time: "2013-01-22 08:42:26+01"});
var marker2 = L.marker([51.6, -0.09], {time: "2013-01-22 10:00:26+01"});
var marker3 = L.marker([51.7, -0.09], {time: "2013-01-22 10:03:29+01"});

var pointA = new L.LatLng(51.8, -0.09);
var pointB = new L.LatLng(51.9, -0.2);
var pointList = [pointA, pointB];

var polyline = new L.Polyline(pointList, {
    time: "2013-01-22 10:24:59+01",
    color: 'red',
    weight: 3,
    opacity: 1,
    smoothFactor: 1
});


layerGroup = L.layerGroup([marker1, marker2, marker3, polyline ]);
var sliderControl = L.control.sliderControl({layer:layerGroup});
myMap.addControl(sliderControl);
sliderControl.startSlider();

*/
    //Fetch some data from a GeoJSON file
//    $.getJSON("examples/points.json", function(json) {
        var testlayer = L.geoJSON(points),
            sliderControl = L.control.sliderControl({
                position: "topright",
                layer: testlayer,
	        alwaysShowDate: true,
		timeStrLength: 4
            });

        //For a Range-Slider use the range property:
/*        sliderControl = L.control.sliderControl({
            position: "topright",
            layer: testlayer,
            alwaysShowDate: true,
	    timeStrLength: 4
        });


        sliderControl.on('rangechanged',function (e) {
            console.log(e.markers)
        });


*/        //Make sure to add the slider to the map ;-)
        myMap.addControl(sliderControl);
        //And initialize the slider
        sliderControl.startSlider();
/*function onEachFeature(testLayer, layer) { 
        if (testLayer.time && testLayer.popup) { 
            testLayer.on('layeradd', function(e) { 
				testLayer.setIcon(L.icon(testLayer.myIcon));
				var content = testLayer.popup;
				testLayer.bindPopup(content, {minWidth: 400, autoPanPadding: [10,80], closeButton: true});
			});
		}
    };  
testLayer.addData(geoJSON);
*/
//    });

    </script>
</body>

</html>
